package conan.ci.step

@Library('demo_jenkins_library') _

pipeline {
    agent any
    stages {
        stage('test') {
            environment{
                DEMO_CONAN_USER = "MYUSER"
                DEMO_CONAN_CHANNEL = "MYCHANNEL"
                DEMO_CONAN_SETTINGS = "build_typ=Release,compiler=gcc"
                DEMO_CONAN_OPTIONS = "somepkg:shared=True,otherpk:shared=False"
                DEMO_CONAN_ENV_VARS = "ENV_VAR1=ENV_VAL1,ENV_VAR2=ENV_VAL2"
                DEMO_CONAN_PROFILES = "profile1,profile2"
                DEMO_CONAN_LOCKFILE = "conan.lock"
            }
            steps {
                conanCreate()
            }
        }
    }
}