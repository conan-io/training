package conan.ci.step

@Library('demo_jenkins_library') _

pipeline {
    agent any
    stages {
        stage('test') {
            environment{
                DEMO_LOG_LEVEL = "DEBUG"
                DEMO_ART_CREDS = "usr:psw"
                DEMO_ART_CREDS_USR = "usr"
                DEMO_ART_CREDS_PSW = "psw"
                DEMO_ARTIFACTORY_URL = "http://artifactory:8082/artifactory"
                DEMO_CONAN_REMOTE_PROD = "name=conan-local-prod;cred=DEMO_ART_CREDS;serverVar=DEMO_ARTIFACTORY_URL"
                DEMO_CONAN_REMOTE_TEMP = "name=conan-local-temp;cred=DEMO_ART_CREDS;serverVar=DEMO_ARTIFACTORY_URL"
                DEMO_CONAN_METADATA_PROD = "name=conan-metadata-prod;cred=DEMO_ART_CREDS"
                DEMO_CONAN_METADATA_TEMP = "name=conan-metadata-temp;cred=DEMO_ART_CREDS"
                DEMO_CONAN_REMOTES = "DEMO_CONAN_REMOTE_PROD,DEMO_CONAN_REMOTE_TEMP"
            }
            steps {
                conanRemotesAdd()
                conanUser()
            }
        }
    }
}